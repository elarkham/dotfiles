#!/usr/bin/env bash

## Yaourt
if (pacman -Q yaourt >/dev/null) then
    echo "Yaourt already installed"
else
    echo "\n######-Installing Yaourt-######\n"
    curl -O https://aur.archlinux.org/packages/pa/package-query/package-query.tar.gz
    tar zxvf package-query.tar.gz
    cd package-query
    makepkg -si
    cd ..
    curl -O https://aur.archlinux.org/packages/ya/yaourt/yaourt.tar.gz
    tar zxvf yaourt.tar.gz
    cd yaourt
    makepkg -si
    cd ..
    ln -s $HOME/etc/yaourtrc $HOME/.yaourtrc
    rm -r $HOME/bin/yaourt
    rm -r $HOME/bin/package-query
    rm $HOME/bin/package-query.tar.gz
    rm $HOME/bin/yaourt.tar.gz
fi
## Config
sudo touch "/etc/profile.d/xdgconfig.sh"
sudo echo 'export XDG_CONFIG_HOME="$HOME/etc"' | sudo tee "/etc/profile.d/xdgconfig.sh" > /dev/null

## Fonts
aurInstall="$aurInstall stlarch_font"
pacInstall="$pacInstall terminus-font profont"

## Game
aurInstall="$aurInstall wesnoth"
pacInstall="$pacInstall steam"

## Windows Manager
aurInstall="$aurInstall bspwm-git sxhkd-git bar-aint-recursive"
pacInstall="$pacInstall openbox"
ln -s $HOME/etc/xinitrc $HOME/.xinitrc

## Music
aurInstall="$aurInstall"
pacInstall="$pacInstall mpd mpc ncmpcpp"

## Video
aurInstall="$aurInstall"
pacInstall="$pacInstall mpv"

## Browser
aurInstall="$aurInstall google-chrome"
pacInstall="$pacInstall"

## Editor
aurInstall="$aurInstall"
pacInstall="$pacInstall vim"
ln -s $HOME/etc/vim $HOME/.vim
ln -s $HOME/etc/vimrc $HOME/.vimrc

## Xorg Utils
aurInstall="$aurInstall"
pacInstall="$pacInstall xorg-apps"

## Terminal
aurInstall="$aurInstall"
pacInstall="$pacInstall rxvt-unicode"
ln -s $HOME/etc/Xresources $HOME/.Xresources

## Shell pt1
pacInstall="$pacInstall zsh"

## SSH pt1
pacInstall="$pacInstall openssh"

## Mail pt1
pacInstall="$pacInstall fdm cronie"

## Install
sudo pacman -Sy $pacInstall
yaourt -S $aurInstall

## Shell pt2
echo "\n######-Change Default Shell-######\n"
ln -s $HOME/etc/bashrc $HOME/.bashrc
ln -s $HOME/etc/zshrc $HOME/.zshrc
ln -s $HOME/etc/warprc $HOME/.warprc
chsh -s /bin/zsh

## SSH pt2
ln -s $HOME/etc/ssh $HOME/.ssh
ssh-keygen -t rsa -b 4096 -C "$(whoami)@$(hostname)-$(date -I)"
ssh-copy-id -i ~/.ssh/id_rsa.pub pudge

## Mail pt2
echo "*/15 * * * * fdm fetch >> $HOME/mail/fdm.log" | crontab
sudo systemctl enable cronie

## Git
ln -s $HOME/etc/gitconfig $HOME/.gitconfig
ln -s $HOME/etc/gitignore $HOME/.gitignore
ln -s $HOME/etc/gitmodules $HOME/.gitmodules


